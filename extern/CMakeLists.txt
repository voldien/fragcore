

OPTION(BUILTIN_NANOSVG "Build with nanosvg" ON)
OPTION(BUILTIN_EIGEN "Build with Eigne" ON)
OPTION(BUILTIN_OPEN_SIMPLEX_NOISE "Build with open Simple Noise" ON)
OPTION(BUILTIN_XATLAS "Build with Xatlas" ON)
OPTION(BUILTIN_PCG_C_BASIC "Build with PCG-C Basic" ON)
OPTION(BUILTIN_RECASTNAVIGATION "Build with " ON)
OPTION(BUILTIN_POLYPARITION "" ON)
OPTION(BUILTIN_KISS_FFT "" ON)
OPTION(BUILTIN_MISC "" ON)

SET(THIRDPARTY_INCLUDE_DIR "" PARENT_SCOPE)
SET(THIRDPARTY_SOURCE "" PARENT_SCOPE)

IF(BUILTIN_NANOSVG)
	SET(NANOSVG_INCLUDE_DIRS ${CMAKE_CURRENT_SOURCE_DIR}/nanosvg PARENT_SCOPE)

	SET(THIRDPARTY_INCLUDE_DIR "${THIRDPARTY_INCLUDE_DIR} ${CMAKE_CURRENT_SOURCE_DIR}/nanosvg")
	FILE(GLOB NANOSVG_SOURCE ${CMAKE_CURRENT_SOURCE_DIR}/nanosvg/*.h
	${CMAKE_CURRENT_SOURCE_DIR}/nanosvg/*.cc)

	SET(THIRDPARTY_SOURCE "${THIRDPARTY_SOURCE};${NANOSVG_SOURCE}")
ENDIF()

IF( BUILTIN_EIGEN)
	SET(EIGEN_INCLUDE_DIRS ${CMAKE_CURRENT_SOURCE_DIR}/eigen/Eigen)

ENDIF()

IF(BUILTIN_OPEN_SIMPLEX_NOISE )
	SET(OPEN_SIMPLEX_NOISE_INCLUDE_DIRS ${CMAKE_CURRENT_SOURCE_DIR}/open-simplex-noise-in-c FILEPATH PARENT_SCOPE)

	SET(THIRDPARTY_INCLUDE_DIR  "${THIRDPARTY_INCLUDE_DIR} ${OPEN_SIMPLEX_NOISE_INCLUDE_DIRS}" PARENT_SCOPE)
	FILE(GLOB OPEN_SIMPLEX_NOISE_SOURCE ${CMAKE_CURRENT_SOURCE_DIR}/open-simplex-noise-in-c/*.c )
	SET(THIRDPARTY_SOURCE "${THIRDPARTY_SOURCE};${OPEN_SIMPLEX_NOISE_SOURCE}" PARENT_SCOPE)
ENDIF()
IF(BUILTIN_XATLAS )
	SET(XATLAS_INCLUDE_DIRS ${CMAKE_CURRENT_SOURCE_DIR}/xatlas)

	SET(THIRDPARTY_INCLUDE_DIR  "${THIRDPARTY_INCLUDE_DIR}  ${XATLAS_INCLUDE_DIRS}" PARENT_SCOPE)
	FILE(GLOB XATLAS_SOURCE ${CMAKE_CURRENT_SOURCE_DIR}/xatlas/*.h
							${CMAKE_CURRENT_SOURCE_DIR}/xatlas/*.cpp )

	SET(THIRDPARTY_SOURCE "${THIRDPARTY_SOURCE};${XATLAS_SOURCE}")
ENDIF()

IF(BUILTIN_PCG_C_BASIC)
	SET(PCG_C_BASIC_INCLUDE_DIRS ${CMAKE_CURRENT_SOURCE_DIR}/pcg-c-basic PARENT_SCOPE)

	SET(THIRDPARTY_INCLUDE_DIR  "${THIRDPARTY_INCLUDE_DIR}  ${PCG_C_BASIC_INCLUDE_DIRS}" PARENT_SCOPE)
	FILE(GLOB PCG_C_BASIC_SOURCE ${CMAKE_CURRENT_SOURCE_DIR}/pcg-c-basic/*.h
							${CMAKE_CURRENT_SOURCE_DIR}/pcg-c-basic/*.c )

	SET(THIRDPARTY_SOURCE "${THIRDPARTY_SOURCE};${PCG_C_BASIC_SOURCE}")
ENDIF()

IF(BUILTIN_RECASTNAVIGATION)
	SET(RECASTNAVIGATION_INCLUDE_DIRS ${CMAKE_CURRENT_SOURCE_DIR}/recastnavigation/Include)

	SET(THIRDPARTY_INCLUDE_DIR  "${THIRDPARTY_INCLUDE_DIR}  ${RECASTNAVIGATION_INCLUDE_DIRS}")
	FILE(GLOB RECASTNAVIGATION_SOURCE ${CMAKE_CURRENT_SOURCE_DIR}/recastnavigation/Include/*.h
										${CMAKE_CURRENT_SOURCE_DIR}/recastnavigation/Source/*.cpp )

	SET(THIRDPARTY_SOURCE "${THIRDPARTY_SOURCE};${RECASTNAVIGATION_SOURCE}")
ENDIF()


IF(BUILTIN_POLYPARITION)
	SET(POLYPARITION_INCLUDE_DIRS ${CMAKE_CURRENT_SOURCE_DIR}/polypartition)


	SET(THIRDPARTY_INCLUDE_DIR  "${THIRDPARTY_INCLUDE_DIR}  ${POLYPARITION_INCLUDE_DIRS}")
	FILE(GLOB POLYPARITION_SOURCE ${CMAKE_CURRENT_SOURCE_DIR}/polypartition/*.h
										${CMAKE_CURRENT_SOURCE_DIR}/polypartition/*.cpp)

	SET(THIRDPARTY_SOURCE "${THIRDPARTY_SOURCE};${POLYPARITION_SOURCE}")
ENDIF()


IF(BUILTIN_KISS_FFT)
	#https://github.com/mborgerding/kissfft.git
	SET(KISS_FFT_INCLUDE_DIRS ${CMAKE_CURRENT_SOURCE_DIR}/kissfft )


	SET(THIRDPARTY_INCLUDE_DIR  "${THIRDPARTY_INCLUDE_DIR}  ${KISS_FFT_INCLUDE_DIRS}")
	FILE(GLOB KISS_FFT_SOURCE ${CMAKE_CURRENT_SOURCE_DIR}/kissfft/*.h
										${CMAKE_CURRENT_SOURCE_DIR}/kissfft/*.c)

	SET(THIRDPARTY_SOURCE "${THIRDPARTY_SOURCE};${KISS_FFT_SOURCE}")
ENDIF()

IF(BUILTIN_MISC)
	SET(MISC_INCLUDE_DIRS ${CMAKE_CURRENT_SOURCE_DIR}/misc)


	SET(THIRDPARTY_INCLUDE_DIR  "${THIRDPARTY_INCLUDE_DIR}  ${MISC_INCLUDE_DIRS}")
	FILE(GLOB MISC_SOURCE ${CMAKE_CURRENT_SOURCE_DIR}/misc/*.h
										${CMAKE_CURRENT_SOURCE_DIR}/misc/*.c
										${CMAKE_CURRENT_SOURCE_DIR}/misc/*.cpp)


	SET(THIRDPARTY_SOURCE "${THIRDPARTY_SOURCE};${MISC_SOURCE}")
ENDIF()

# By default exclude most of the sub-project to prevent it compile some target
# is not needed by the project.
ADD_SUBDIRECTORY(${CMAKE_CURRENT_SOURCE_DIR}/hpmcpp EXCLUDE_FROM_ALL)
ADD_SUBDIRECTORY(${CMAKE_CURRENT_SOURCE_DIR}/task-scheduler EXCLUDE_FROM_ALL)
LIST(APPEND CMAKE_MODULE_PATH ${CMAKE_CURRENT_SOURCE_DIR}/backward-cpp )
ADD_SUBDIRECTORY(${CMAKE_CURRENT_SOURCE_DIR}/backward-cpp)
ADD_SUBDIRECTORY(${CMAKE_CURRENT_SOURCE_DIR}/vulkan-samples EXCLUDE_FROM_ALL)
ADD_SUBDIRECTORY(${CMAKE_CURRENT_SOURCE_DIR}/infoware EXCLUDE_FROM_ALL)

GET_TARGET_PROPERTY(HPMCPP_INCLUDE_DIRS hpmcpp INCLUDE_DIRECTORIES)
GET_TARGET_PROPERTY(TASKSCH_INCLUDE_DIRS taskSch INCLUDE_DIRECTORIES)
#GET_TARGET_PROPERTY(VKCommonCore_INCLUDE_DIRS vkcommon-core INCLUDE_DIRECTORIES)

IF(BUILTIN_JEMALLOC)
	#https://github.com/jemalloc/jemalloc.git
ENDIF()

# 	# https://github.com/googlefonts/noto-fonts
# 	# https://github.com/source-foundry/Hack
# 	# https://github.com/google/etc2comp

# 	#https://gitlab.com/libeigen/eigen
# 	# https://github.com/baldurk/renderdoc.git
# 	# https://github.com/ispc/ispc.git
# 	# https://github.com/mborgerding/kissfft.git
# 	# https://github.com/NVIDIAGameWorks/PhysX.git

# 	# https://github.com/jemalloc/jemalloc.git
# 	# https://github.com/turbulenz/NvTriStrip.git
# 	# https://github.com/microsoft/ShaderConductor.git
# 	# https://github.com/AcademySoftwareFoundation/openexr.git
# 	# https://github.com/erikd/libsamplerate.git
# 	# https://bitbucket.org/jthlim/pvrtccompressor
# 	# https://sourceforge.net/projects/libsquish
# 	# https://github.com/syoyo/tinyexr
# 	# https://github.com/tatsuhiro-t/wslay.git

# ELSE()
# 	MESSAGE(WARNING "Require Git for loading external source codes.")
# ENDIF()

# Check that all the depdends variables are found
